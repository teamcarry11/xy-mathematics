# Timestamp Grammar Fuzz

Date: 2025-11-10  
Operator: Glow G2 (Stoic Aquarian cadence)

## Objective
Validate the runtime `TimestampGrammar.validate` logic under randomized inputs, ensuring it preserves
TigerStyle safety: no unexpected panics for valid data, deterministic behavior for allowed empty
segments, and alignment with the append-only prompt ledger.

## Method
- Added a Zig test harness (`test "timestamp grammar fuzz respects configuration"`) in
  `src/ray.zig`.
  - Custom LCG PRNG (wrap-safe math) generates up to five segments per sample.
  - Randomly toggles empty segments when allowed; counts non-empty segments for grammar init.
  - Uses Arena allocator + `ArrayListUnmanaged` to minimize heap noise.
- Executed via `zig test src/ray.zig`.

## Results
```
$ zig test src/ray.zig
1/1 ray.test.timestamp grammar fuzz respects configuration...OK
All 1 tests passed.
```

## Notes
- Negative-path tests (panic expectations) deferred until we introduce an error-returning validator
  or add `expectPanic` polyfill compatible with Zig 0.15.
- Future extensions: seed parameterization, snapshotting failing inputs, comparing against the new
  manifest fuzz experiment to ensure cross coverage, and interleaving with prompt ledger alterations
  to keep chronological inserts O(1).

